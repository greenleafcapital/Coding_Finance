---
title: "Quantitative Investment Analysis - Chapter 4"
author: "DD"
date: "2020-04-28"
description: "Chapter 4: Probability Concepts"
output:
  html_document:
    highlight: tango
---

<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>


<pre class="r"><code>library(tidyverse)
library(knitr)
library(kableExtra)</code></pre>
<p>In this post we will solve the end of the chapter practice problems from chapter 4 of the <a href="https://www.amazon.com/Quantitative-Investment-Analysis-CFA-Institute/dp/111910422X">book</a>.</p>
<div id="problem-1" class="section level3">
<h3>Problem 1</h3>
<p>Suppose that 5 percent of the stocks meeting your stock-selection criteria are in the telecommunications (telecom) industry. Also, dividend-paying telecom stocks are 1 percent of the total number of stocks meeting your selection cri-teria. What is the probability that a stock is dividend paying, given that it is a telecom stock that has met your stock selection criteria?</p>
<pre class="r"><code># Probability stock is telecom
p_telecom &lt;- 0.05

# Probability stock is dividend paying telecom stock
p_div_telecom &lt;- 0.01

# Find
# p(stock_is_div | stock_is_telecom) = p(stock_is_div_telecom) / p(stock_is_telecom)

p &lt;- p_div_telecom / p_telecom

cat(&quot;The probability that a stock is dividend paying, 
given that it is a telecom stock that 
has met your stock selection criteria is&quot;, p)</code></pre>
<pre><code>## The probability that a stock is dividend paying, 
## given that it is a telecom stock that 
## has met your stock selection criteria is 0.2</code></pre>
</div>
<div id="problem-2" class="section level3">
<h3>Problem 2</h3>
<p>You are using the following three criteria to screen potential acquisition targets from a list of 500 companies:</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Criterion
</th>
<th style="text-align:right;">
Fraction of the 500 Companies Meeting the Criterion
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Product lines compatible
</td>
<td style="text-align:right;">
0.20
</td>
</tr>
<tr>
<td style="text-align:left;">
Company will increase combined sales growth rate
</td>
<td style="text-align:right;">
0.45
</td>
</tr>
<tr>
<td style="text-align:left;">
Balance sheet impact manageable
</td>
<td style="text-align:right;">
0.78
</td>
</tr>
</tbody>
</table>
<p>If the criteria are independent, how many companies will pass the screen?</p>
<pre class="r"><code>p &lt;- (0.2 * 0.45 * 0.78)
c &lt;- 500 * p

cat(paste0(p*100,&quot;%&quot;), &quot;or&quot;, round(c), &quot;companies will pass the screening.&quot;)</code></pre>
<pre><code>## 7.02% or 35 companies will pass the screening.</code></pre>
</div>
<div id="problem-3" class="section level3">
<h3>Problem 3</h3>
<p>You apply both valuation criteria and financial strength criteria in choosing stocks. The probability that a randomly selected stock (from your investment universe) meets your valuation criteria is 0.25. Given that a stock meets your valuation criteria, the probability that the stock meets your financial strength criteria is 0.40. What is the probability that a stock meets both your valuation and financial strength criteria?</p>
<pre class="r"><code>p_val &lt;- 0.25
p_fin &lt;- 0.4

p &lt;- p_val * p_fin

cat(&quot;The probability that a stock meets both your 
valuation and financial strength criteria is&quot;, p)</code></pre>
<pre><code>## The probability that a stock meets both your 
## valuation and financial strength criteria is 0.1</code></pre>
</div>
<div id="problem-4" class="section level3">
<h3>Problem 4</h3>
<p>Suppose the prospects for recovering principal for a defaulted bond issue depend on which of two economic scenarios prevails.</p>
<ul>
<li>Scenario 1 has probability 0.75 and will result in recovery of $0.90 per $1 principal value with probability 0.45, or in recovery of $0.80 per $1 principal value with probability 0.55.</li>
<li><p>Scenario 2 has probability 0.25 and will result in recovery of $0.50 per $1 principal value with probability 0.85, or in recovery of $0.40 per $1 principal value with probability 0.15.</p></li>
<li>A Compute the probability of each of the four possible recovery amounts: $0.90, $0.80, $0.50, and $0.40.</li>
<li>B Compute the expected recovery, given the first scenario.</li>
<li>C Compute the expected recovery, given the second scenario.</li>
<li><p>D Compute the expected recovery.</p></li>
</ul>
<pre class="r"><code># Probability Recovery of $0.90

p_90 &lt;- (0.75) * (0.45)

# Probability Recovery of $0.80

p_80 &lt;- (0.75) * (0.55)

# Probability Recovery of $0.50

p_50 &lt;- (0.25) * (0.85)

# Probability Recovery of $0.40

p_40 &lt;- (0.25) * (0.15)

cat(&quot;The probability of each of the four possible recovery 
amounts: $0.90, $0.80, $0.50, and $0.40 is\n&quot;,
p_90,p_80,p_50,p_40, &quot;respectively.&quot;)</code></pre>
<pre><code>## The probability of each of the four possible recovery 
## amounts: $0.90, $0.80, $0.50, and $0.40 is
##  0.3375 0.4125 0.2125 0.0375 respectively.</code></pre>
<p>A. The probability of each of the four possible recovery amounts: $0.90, $0.80, $0.50, and $0.40 is 0.3375 0.4125 0.2125 0.0375 respectively.</p>
<pre class="r"><code># Expected recovery given Scenario 1

e_1 &lt;- (0.45 * 0.9) + (0.55 * 0.8)

cat(&quot;Expected recovery given Scenario 1 is&quot;, e_1)</code></pre>
<pre><code>## Expected recovery given Scenario 1 is 0.845</code></pre>
<p>B. Expected recovery given Scenario 1 is 0.845</p>
<pre class="r"><code># Expected recovery Scenario 2

e_2 &lt;- (0.85 * 0.5) + (0.15 * 0.4)

cat(&quot;Expected recovery given Scenario 2 is&quot;, e_2)</code></pre>
<pre><code>## Expected recovery given Scenario 2 is 0.485</code></pre>
<p>C. Expected recovery given Scenario 2 is 0.485</p>
<pre class="r"><code>e &lt;- e_1 + e_2

cat(&quot;The expected recovery is&quot;, e)</code></pre>
<pre><code>## The expected recovery is 1.33</code></pre>
<p>D. The expected recovery is 0.755</p>
</div>
<div id="problem-5" class="section level3">
<h3>Problem 5</h3>
<p>You have developed a set of criteria for evaluating distressed credits. Companies that do not receive a passing score are classed as likely to go bankrupt within 12 months. You gathered the following information when validating the criteria:</p>
<p>Forty percent of the companies to which the test is administered will go bankrupt within 12 months: P(nonsurvivor) = 0.40.
Fifty- five percent of the companies to which the test is administered pass it: P(pass test) = 0.55.
The probability that a company will pass the test given that it will subsequently survive 12 months, is 0.85: P(pass test | survivor) = 0.85.</p>
<ul>
<li>A What is P(pass test | nonsurvivor)?</li>
<li>B Using Bayes’ formula, calculate the probability that a company is a survivor, given that it passes the test; that is, calculate P(survivor | pass test).</li>
<li>C What is the probability that a company is a nonsurvivor, given that it fails the test?</li>
<li>D Is the test effective?</li>
</ul>
<pre class="r"><code># P(nonsurvivor) = 0.40
# P(pass test) = 0.55
# P(pass test | survivor) = 0.85

# We know
# p(survivor) = 1 - P(nonsurvivor) = 1 - 0.4 = 0.6

# p(pass_test) = p(pass_test | survivor) * p(survivor) + p(pass_test | nonsurvivor) * p(nonsurvivor)

# 0.55 = (0.85 * 0.6) + p(pass_test | nonsurvivor) * 0.4

p_pass_test_nonsurvivor =  (0.55 - (0.85 * 0.6)) / 0.4

cat(&quot;P(pass test | nonsurvivor) is&quot;, p_pass_test_nonsurvivor)</code></pre>
<pre><code>## P(pass test | nonsurvivor) is 0.1</code></pre>
<p>A. P(pass test | nonsurvivor) is 0.1</p>
<pre class="r"><code># p(survivor | pass test) = [p (pass test | survivor) / p(pass test)] * p(survivor)

p &lt;- (0.85 * 0.6) / 0.55

cat(&quot;The probability that a company is a survivor, given that it passes the test is&quot;, p)</code></pre>
<pre><code>## The probability that a company is a survivor, given that it passes the test is 0.9272727</code></pre>
<p>B. The probability that a company is a survivor, given that it passes the test is 0.9272727</p>
<pre class="r"><code># p(nonsurvivor | fail test) = ?
# p(fail test) = 1 - p(pass test)
# p(fail test) = 1 - 0.55 = 0.45

# p(fail test) = p(fail test | nonsurvivor) * p(nonsurvivor) + p(fail test | survivor) * p(survivor)

# 0.45 = p(fail test | nonsurvivor) * 0.4 + 0.15 * 0.6

p_failtest_nonsurvivor &lt;- (0.45 - (0.6 * 0.15)) / 0.4

# Bayes formula

# p(nonsurvivor | fail test) = [p(fail test | nonsurvivor) / p(fail test)] * p(nonsurvivor)

p_nonsurvivro_ftest &lt;- p_failtest_nonsurvivor / 0.45 * 0.4

cat(&quot;The probability that a company is a nonsurvivor, given that it fails the test is&quot;, p_nonsurvivro_ftest)</code></pre>
<pre><code>## The probability that a company is a nonsurvivor, given that it fails the test is 0.8</code></pre>
<p>C. The probability that a company is a nonsurvivor, given that it fails the test is 0.8</p>
<p>D. Test appears to be useful since, the company that passes the test has 92% survival rate and company that fails the test has 80% non survival rate.</p>
</div>
<div id="problem-6" class="section level3">
<h3>Problem 6</h3>
<p>In probability theory, exhaustive events are best described as events:</p>
<ul>
<li>A with a probability of zero.</li>
<li>B that are mutually exclusive.</li>
<li>C that include all potential outcomes.</li>
</ul>
<p>C. that include all potential outcomes.</p>
</div>
<div id="problem-7" class="section level3">
<h3>Problem 7</h3>
<p>Which probability estimate most likely varies greatly between people?</p>
<ul>
<li>A An a priori probability</li>
<li>B An empirical probability</li>
<li>C A subjective probability</li>
</ul>
<p>C. A subjective probability</p>
</div>
<div id="problem-8" class="section level3">
<h3>Problem 8</h3>
<p>If the probability that Zolaf Company sales exceed last year’s sales is 0.167, the odds for exceeding sales are closest to:</p>
<ul>
<li>A 1 to 5.</li>
<li>B 1 to 6.</li>
<li>C 5 to 1.</li>
</ul>
<p>A. 1 to 5</p>
</div>
<div id="problem-9" class="section level3">
<h3>Problem 9</h3>
<p>The probability of an event given that another event has occurred is a:</p>
<ul>
<li>A joint probability.</li>
<li>B marginal probability.</li>
<li>C conditional probability.</li>
</ul>
<p>C. conditional probability.</p>
</div>
<div id="problem-10" class="section level3">
<h3>Problem 10</h3>
<p>After estimating the probability that an investment manager will exceed his benchmark return in each of the next two quarters, an analyst wants to forecast the probability that the investment manager will exceed his benchmark return over the two- quarter period in total. Assuming that each quarter’s performance is independent of the other, which probability rule should the analyst select?</p>
<ul>
<li>A Addition rule</li>
<li>B Multiplication rule</li>
<li>C Total probability rule</li>
</ul>
<p>B. Multiplication rule</p>
</div>
<div id="problem-11" class="section level3">
<h3>Problem 11</h3>
<p>Which of the following is a property of two dependent events?</p>
<ul>
<li>A The two events must occur simultaneously.</li>
<li>B The probability of one event influences the probability of the other event.</li>
<li>C The probability of the two events occurring is the product of each event’s probability</li>
</ul>
<p>B. The probability of one event influences the probability of the other event.</p>
</div>
<div id="problem-12" class="section level3">
<h3>Problem 12</h3>
<p>Which of the following best describes how an analyst would estimate the expected value of a firm under the scenarios of bankruptcy and survivorship? The analyst would use:</p>
<ul>
<li>A the addition rule.</li>
<li>B conditional expected values.</li>
<li>C the total probability rule for expected value.</li>
</ul>
<p>C. the total probability rule for expected value.</p>
</div>
<div id="problem-13" class="section level3">
<h3>Problem 13</h3>
<p>An analyst developed two scenarios with respect to the recovery of $100,000 principal from defaulted loans:</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
Scenario
</th>
<th style="text-align:right;">
Probabilityof Scenario (%)
</th>
<th style="text-align:right;">
AmountRecovered ($)
</th>
<th style="text-align:right;">
Probabilityof Amount (%)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
50000
</td>
<td style="text-align:right;">
60
</td>
</tr>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
40
</td>
<td style="text-align:right;">
30000
</td>
<td style="text-align:right;">
40
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
60
</td>
<td style="text-align:right;">
80000
</td>
<td style="text-align:right;">
90
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
60
</td>
<td style="text-align:right;">
60000
</td>
<td style="text-align:right;">
10
</td>
</tr>
</tbody>
</table>
<p>The amount of the expected recovery is closest to:</p>
<ul>
<li>A $36,400.</li>
<li>B $63,600.</li>
<li>C $81,600.</li>
</ul>
<pre class="r"><code># This is a expected total probability problem

# Scenario 1

s1 &lt;- (0.4 * 0.6 * 50000) + (0.4 * 0.4 * 30000)

s2 &lt;- (0.6 * 0.9 * 80000) + (0.6 * 0.1 * 60000)

s &lt;- s1 + s2

cat(&quot;The amount of the expected recovery is closest to&quot;, s)</code></pre>
<pre><code>## The amount of the expected recovery is closest to 63600</code></pre>
<p>B. The amount of the expected recovery is closest to 63600</p>
</div>
<div id="problem-14" class="section level3">
<h3>Problem 14</h3>
<p>US and Spanish bonds have return standard deviations of 0.64 and 0.56, respectively. If the correlation between the two bonds is 0.24, the covariance of returns is closest to:</p>
<ul>
<li>A 0.086.</li>
<li>B 0.670.</li>
<li>C 0.781.</li>
</ul>
<pre class="r"><code># Cov(US bond returns, Spanish bond returns) = σ(US bonds) × σ(Spanish bonds) × ρ(US bond returns, Spanish bond returns)

0.64 * 0.56 * 0.24</code></pre>
<pre><code>## [1] 0.086016</code></pre>
<p>A. 0.086</p>
</div>
<div id="problem-15" class="section level3">
<h3>Problem 15</h3>
<p>The covariance of returns is positive when the returns on two assets tend to:</p>
<ul>
<li>A have the same expected values.</li>
<li>B be above their expected value at different times.</li>
<li>C be on the same side of their expected value at the same time.</li>
</ul>
<p>C. be on the same side of their expected value at the same time.</p>
</div>
<div id="problem-16" class="section level3">
<h3>Problem 16</h3>
<p>Which of the following correlation coefficients indicates the weakest linear relationship between two variables?</p>
<ul>
<li>A –0.67</li>
<li>B –0.24</li>
<li>C 0.33</li>
</ul>
<p>B. –0.24</p>
</div>
<div id="problem-17" class="section level3">
<h3>Problem 17</h3>
<p>An analyst develops the following covariance matrix of returns:</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Index
</th>
<th style="text-align:right;">
Hedge Fund
</th>
<th style="text-align:right;">
Market Index
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Hedge fund
</td>
<td style="text-align:right;">
256
</td>
<td style="text-align:right;">
110
</td>
</tr>
<tr>
<td style="text-align:left;">
Market index
</td>
<td style="text-align:right;">
110
</td>
<td style="text-align:right;">
81
</td>
</tr>
</tbody>
</table>
<p>The correlation of returns between the hedge fund and the market index is closest to:</p>
<ul>
<li>A 0.005.</li>
<li>B 0.073.</li>
<li>C 0.764.</li>
</ul>
<pre class="r"><code># ρ(Ri,Rj) = Cov(Ri,Rj)/[σ(Ri)σ(Rj)]

110 / (sqrt(256) * sqrt(81))</code></pre>
<pre><code>## [1] 0.7638889</code></pre>
<p>C. 0.764</p>
</div>
<div id="problem-18" class="section level3">
<h3>Problem 18</h3>
<p>All else being equal, as the correlation between two assets approaches +1.0, the diversification benefits:</p>
<ul>
<li>A decrease.</li>
<li>B stay the same.</li>
<li>C increase.</li>
</ul>
<p>A. decrease</p>
</div>
<div id="problem-19" class="section level3">
<h3>Problem 19</h3>
<p>Given a portfolio of five stocks, how many unique covariance terms, excluding variances, are required to calculate the portfolio return variance?</p>
<ul>
<li>A 10</li>
<li>B 20</li>
<li>C 25</li>
</ul>
<p>A. 10</p>
</div>
<div id="problem-20" class="section level3">
<h3>Problem 20</h3>
<p>The probability distribution for a company’s sales is:</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
Probability
</th>
<th style="text-align:right;">
Sales ($ millions)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
0.05
</td>
<td style="text-align:right;">
70
</td>
</tr>
<tr>
<td style="text-align:right;">
0.70
</td>
<td style="text-align:right;">
40
</td>
</tr>
<tr>
<td style="text-align:right;">
0.25
</td>
<td style="text-align:right;">
25
</td>
</tr>
</tbody>
</table>
<p>The standard deviation of sales is closest to:</p>
<ul>
<li>A $9.81 million.</li>
<li>B $12.20 million.</li>
<li>C $32.40 million</li>
</ul>
<pre class="r"><code># Calculate the expected sales
expected_sales &lt;- df %&gt;%
  mutate(e = Probability * `Sales ($ millions)`) %&gt;%
  summarise(m = sum(e)) %&gt;%
  .[[1]]

# Calculate SD

s &lt;- df %&gt;%
  mutate(v = Probability * (`Sales ($ millions)` - expected_sales)^2) %&gt;%
  summarise(s = sqrt(sum(v))) %&gt;%
  .[[1]]

cat(&quot;The standard deviation of sales is closest to&quot;, s)</code></pre>
<pre><code>## The standard deviation of sales is closest to 9.807523</code></pre>
<p>A. $9.81</p>
</div>
<div id="problem-21" class="section level1">
<h1>Problem 21</h1>
<p>Which of the following statements is most accurate? If the covariance of returns between two assets is 0.0023, then:</p>
<ul>
<li>A the assets’ risk is near zero.</li>
<li>B the asset returns are unrelated.</li>
<li>C the asset returns have a positive relationship.</li>
</ul>
<p>C. the asset returns have a positive relationship.</p>
</div>
<div id="problem-22" class="section level1">
<h1>Problem 22</h1>
<p>An analyst produces the following joint probability function for a foreign index (FI) and a domestic index (DI).</p>
<table class="table table-striped" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
FI
</th>
<th style="text-align:left;">
RDI = 30%
</th>
<th style="text-align:left;">
RDI = 25%
</th>
<th style="text-align:left;">
RDI = 15%
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
RFI = 25%
</td>
<td style="text-align:left;">
0.25
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
RFI = 15%
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
0.50
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
RFI = 10%
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
0.25
</td>
</tr>
</tbody>
</table>
<p>The covariance of returns on the foreign index and the returns on the domestic index is closest to:</p>
<ul>
<li>A 26.39.</li>
<li>B 26.56.</li>
<li>C 28.12</li>
</ul>
<pre class="r"><code># Calculate the Expected returns

er_fi &lt;- (0.25 * 25) + (0.5 * 15) + (0.25 * 10)
er_di &lt;- (0.25 * 30) + (0.5 * 25) + (0.25 * 15)

cov_fi_di &lt;- (0.25 * (25 - er_fi) * (30 - er_di)) + (0.5 * (15 - er_fi) * (25 - er_di)) + (0.25 * (10 - er_fi) * (15 - er_di))

cat(&quot;The covariance of returns on the foreign index and the returns on the domestic index is closest to&quot;, cov_fi_di)</code></pre>
<pre><code>## The covariance of returns on the foreign index and the returns on the domestic index is closest to 26.5625</code></pre>
<p>B. 26.56</p>
<div id="problem-23" class="section level3">
<h3>Problem 23</h3>
<p>A manager will select 20 bonds out of his universe of 100 bonds to construct a portfolio. Which formula provides the number of possible portfolios?</p>
<ul>
<li>A Permutation formula</li>
<li>B Multinomial formula</li>
<li>C Combination formula</li>
</ul>
<p>C. Combination formula</p>
</div>
<div id="problem-24" class="section level3">
<h3>Problem 24</h3>
<p>A firm will select two of four vice presidents to be added to the investment committee. How many different groups of two are possible?</p>
<ul>
<li>A 6</li>
<li>B 12</li>
<li>C 24</li>
</ul>
<pre class="r"><code># nCr
# n! / (n-r)!r!

n = 4
r = 2

factorial(n) / (factorial(n - r) * factorial(r))</code></pre>
<pre><code>## [1] 6</code></pre>
<p>A. 6</p>
</div>
<div id="problem-25" class="section level3">
<h3>Problem 25</h3>
<p>From an approved list of 25 funds, a portfolio manager wants to rank 4 mutual funds from most recommended to least recommended. Which formula is most appropriateto calculate the number of possible ways the funds could be ranked?</p>
<ul>
<li>A Permutation formula</li>
<li>B Multinomial formula</li>
<li>C Combination formula</li>
</ul>
<p>A. Permutation formula</p>
</div>
</div>
